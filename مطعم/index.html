<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>الشلول للمأكولات الشعبية | إربد – دوقرة</title>
<meta name="description" content="الشلول للمأكولات الشعبية في إربد – دوقرة. فلافل، حمص، فول، مسبحة وسندويشات.">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#ffffff; --ink:#0f172a; --muted:#64748b; --line:#e2e8f0;
  --card:#ffffff; --panel:#f8fafc;
  --blue:#2563eb; --blue-2:#22a7ff;
  --green:#10b981;
  --dark:#0b1220;        /* غامق للهيدر والفوتر */
  --dark-ink:#e5e7eb;    /* نص فاتح على الغامق */
  --radius:16px; --shadow:0 12px 28px rgba(2,6,23,.06);
  --max:1100px;
}
*{box-sizing:border-box}
body{margin:0;font-family:"Cairo",system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--ink)}
a{color:inherit;text-decoration:none}
.wrap{max-width:var(--max);margin:auto;padding:0 18px}

/* Topbar (غامق) */
.topbar{background:var(--dark);color:var(--dark-ink);border-bottom:1px solid #111827}
.topbar .row{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:18px 0}
.brand h1{margin:0;font-size:clamp(24px,5vw,34px);line-height:1.1}
.brand p{margin:6px 0 0;color:#b6c0cf;font-size:14px}
.meta{display:flex;gap:14px;align-items:center;flex-wrap:wrap;font-weight:700}
.meta a.location{padding:8px 12px;border:1px dashed #2a3b5f;border-radius:12px;color:#bcd7ff;background:#0f1a33}

/* sections & panels */
.section{padding:16px 0}
.panel{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow)}
h2.sec{margin:6px 0 14px;font-size:22px}

/* grid + cards */
.grid{display:grid;gap:14px}
@media (min-width:860px){ .grid-2{grid-template-columns:1fr 1fr} .grid-3{grid-template-columns:repeat(3,1fr)} }
.card{background:#fff;border:1px solid var(--line);border-radius:14px;overflow:hidden;transition:transform .15s ease, box-shadow .2s ease;position:relative}
.card:hover{transform:translateY(-4px);box-shadow:var(--shadow)}
.card img{width:100%;aspect-ratio:3/2;object-fit:cover}
.card .body{padding:14px}
.card h3{margin:0 0 6px;font-size:18px}
.card p{margin:0;color:var(--muted);font-size:13px}
.price{margin-top:8px;font-weight:800;color:var(--blue)}
.add-btn{
  position:absolute;inset:auto 10px 10px auto;padding:10px 12px;border-radius:12px;
  background:linear-gradient(135deg,var(--green),#22c55e);color:#fff;font-weight:800;border:none;cursor:pointer;
  box-shadow:0 8px 22px rgba(16,185,129,.25)
}

/* list menu */
.menu{display:flex;flex-direction:column;gap:12px}
.item{display:flex;gap:12px;align-items:center;border:1px solid var(--line);border-radius:14px;padding:10px;position:relative}
.item img{width:72px;height:72px;border-radius:12px;object-fit:cover}
.item .i-body{flex:1}
.item .i-body h4{margin:0;font-size:17px}
.item .i-body p{margin:4px 0 0;color:var(--muted);font-size:13px}
.item .mini-add{border:none;background:#0ea5e9;color:#fff;border-radius:10px;padding:8px 10px;font-weight:800;cursor:pointer}

/* زر السلة العائم */
.cart-fab{
  position:fixed;bottom:18px;left:18px;z-index:40;
  background:linear-gradient(135deg,var(--blue),var(--blue-2));color:#fff;border:none;
  border-radius:999px;padding:12px 16px;font-weight:800;display:flex;align-items:center;gap:8px;
  box-shadow:0 18px 36px rgba(37,99,235,.3);cursor:pointer;transform-origin:center;
}
.cart-count{background:#fff;color:#1e40af;border-radius:999px;padding:2px 8px;font-weight:800}

/* أنيميشن إبراز السلة */
@keyframes bump{0%{transform:scale(1)}30%{transform:scale(1.12)}60%{transform:scale(0.96)}100%{transform:scale(1)}}
.cart-fab.bump{animation:bump .55s ease}
@keyframes glow{0%{box-shadow:0 0 0 0 rgba(37,99,235,.5)}100%{box-shadow:0 0 0 14px rgba(37,99,235,0)}}
.cart-fab.glow{animation:glow .8s ease}

/* Toast */
.toast{
  position:fixed;bottom:92px;left:18px;z-index:45;background:#111827;color:#e5e7eb;
  padding:10px 14px;border-radius:12px;box-shadow:0 10px 24px rgba(0,0,0,.25);opacity:0;transform:translateY(8px);
  transition:.25s;pointer-events:none
}
.toast.show{opacity:1;transform:translateY(0)}

/* Drawer السلة */
.drawer{
  position:fixed;inset:0 0 0 auto;width:min(100%,420px);background:#fff;box-shadow:-10px 0 30px rgba(2,6,23,.25);
  transform:translateX(100%);transition:transform .25s ease;z-index:50;display:flex;flex-direction:column
}
.drawer.open{transform:none}
.drawer header{padding:14px 16px;border-bottom:1px solid var(--line);display:flex;justify-content:space-between;align-items:center}
.drawer .body{padding:12px 16px;overflow:auto;flex:1;display:flex;flex-direction:column;gap:12px}
.cart-item{display:grid;grid-template-columns:64px 1fr auto;gap:10px;border:1px solid var(--line);border-radius:12px;padding:8px}
.cart-item img{width:64px;height:64px;border-radius:10px;object-fit:cover}
.cart-item h5{margin:0;font-size:15px}
.qty{display:flex;align-items:center;gap:6px}
.qty button{width:28px;height:28px;border-radius:8px;border:1px solid var(--line);background:#fff;cursor:pointer}
.total{display:flex;justify-content:space-between;align-items:center;border-top:1px dashed var(--line);padding-top:10px;font-weight:800}
.form label{display:block;font-size:13px;color:var(--muted);margin:6px 0 4px}
.input, select, textarea{width:100%;padding:10px;border:1px solid var(--line);border-radius:10px;background:#fff;font-family:inherit}
.actions{display:flex;flex-direction:column;gap:8px;margin-top:10px}
.btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;background:linear-gradient(135deg,var(--blue),var(--blue-2));color:#fff;font-weight:800;border:none;cursor:pointer;justify-content:center}
.btn-outline{background:#fff;color:var(--blue);border:1px solid var(--blue)}
.help{font-size:12px;color:var(--muted)}

/* بطاقة تواصل (بدل الخريطة الكبيرة) */
.contact{display:grid;gap:10px}
.contact .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
.contact .pill{padding:8px 12px;border:1px solid var(--line);border-radius:12px;background:#fff}

/* Footer غامق */
footer{margin:0; background:var(--dark); color:var(--dark-ink); padding:18px 16px;}
footer .inner{max-width:var(--max);margin:auto;display:flex;flex-direction:column;gap:8px;align-items:center;text-align:center}
footer .dev{display:flex;gap:8px;align-items:center}
footer .dev a{background:#25D366;color:#0b3520;padding:8px 12px;border-radius:10px;font-weight:800}
footer .rights{color:#b6c0cf}
</style>
</head>
<body>

<!-- Topbar (غامق) -->
<div class="topbar">
  <div class="wrap">
    <div class="row">
      <div class="brand">
        <h1>الشلول للمأكولات الشعبية</h1>
        <p>فلافل • حمص • فول • مسبحة</p>
      </div>
      <div class="meta">
        <a class="location" href="https://maps.app.goo.gl/d32S4R4zHrgpjp6k6?g_st=aw" target="_blank" rel="noopener">📍 إربد – دوقرة</a>
      </div>
    </div>
  </div>
</div>

<div class="wrap">

  <!-- قسم رئيسي مختصر -->
  <section class="section panel">
    <h2 class="sec">نكهات شعبية… بجودة عالية</h2>
    <p style="margin:0;color:var(--muted)">ساندويشات فلافل، أطباق حمص وفول ومسبحة — وجبات عائلية وخيارات سريعة.</p>
  </section>

  <!-- العروض + الأكثر طلبًا -->
  <section class="section grid grid-2">
    <!-- عروض اليوم -->
    <div class="panel">
      <h2 class="sec">عروض اليوم</h2>
      <div class="grid grid-3">
        <div class="card" data-id="sand1" data-name="سندويش فلافل طازج" data-price="0.60" data-img="Sandwich%201.jpg">
          <img src="Sandwich%201.jpg" alt="سندويش فلافل">
          <button class="add-btn">أضِف إلى السلة</button>
          <div class="body">
            <h3>سندويش فلافل طازج</h3>
            <p>خبز طابون + مخللات + طحينية</p>
            <div class="price">0.60 JD</div>
          </div>
        </div>
        <div class="card" data-id="hummus1" data-name="حمّص بالصنوبر" data-price="1.50" data-img="hommos.jpg">
            <img src="hommos.jpg" alt="حمص">
            <button class="add-btn">أضِف إلى السلة</button>
            <div class="body">
              <h3>حمّص بالصنوبر</h3>
              <p>كريمي بزيت الزيتون والليمون</p>
              <div class="price">1.50 JD</div>
            </div>
        </div>
        <div class="card" data-id="foul1" data-name="فول بلدي" data-price="1.20" data-img="Foul.jpg">
          <img src="Foul.jpg" alt="فول">
          <button class="add-btn">أضِف إلى السلة</button>
          <div class="body">
            <h3>فول بلدي</h3>
            <p>ثوم، ليمون وكمون</p>
            <div class="price">1.20 JD</div>
          </div>
        </div>
      </div>
    </div>

    <!-- الأكثر طلبًا -->
    <div class="panel">
      <h2 class="sec">الأكثر طلبًا</h2>
      <div class="menu">
        <div class="item" data-id="falafel-plate" data-name="صحن فلافل" data-price="1.80" data-img="Falafel.jpg">
          <img src="Falafel.jpg" alt="فلافل">
          <div class="i-body">
            <h4>صحن فلافل</h4>
            <p>12 حبة + خضار ومخللات</p>
          </div>
          <div class="price">1.80 JD</div>
          <button class="mini-add">+</button>
        </div>
        <div class="item" data-id="mtsabaha" data-name="مسبّحة" data-price="1.30" data-img="Mtapl.jpg">
          <img src="Mtapl.jpg" alt="مسبحة">
          <div class="i-body">
            <h4>مسبّحة</h4>
            <p>حمص حب + طحينية + دبس رمان</p>
          </div>
          <div class="price">1.30 JD</div>
          <button class="mini-add">+</button>
        </div>
        <div class="item" data-id="family-sand" data-name="سندويش فلافل عائلي" data-price="2.20" data-img="Sandwich%203.jpg">
          <img src="Sandwich%203.jpg" alt="سندويش فلافل">
          <div class="i-body">
            <h4>سندويش فلافل عائلي</h4>
            <p>خبز فرنسي محمّص</p>
          </div>
          <div class="price">2.20 JD</div>
          <button class="mini-add">+</button>
        </div>
      </div>
    </div>
  </section>

  <!-- تواصل معنا + زر خريطة صغير -->
  <section class="section panel contact">
    <h2 class="sec">📞 تواصل وموقعنا</h2>
    <div class="row">
      <a class="btn" href="https://maps.app.goo.gl/d32S4R4zHrgpjp6k6?g_st=aw" target="_blank" rel="noopener">🗺️ افتح اللوكيشن</a>
      <a class="pill" href="tel:0790986908">الهاتف: 0790986908</a>
      <a class="pill" href="mailto:mshlool684@gmail.com">email: mshlool684@gmail.com</a>
      <span class="pill">ساعات العمل: 8 صباحًا — 12 ليلًا</span>
    </div>
  </section>

</div>

<!-- زر السلة العائم -->
<button class="cart-fab" id="openCart" aria-label="السلة">
  🛒 السلة <span class="cart-count" id="cartCount">0</span>
</button>
<div class="toast" id="toast">تمت الإضافة إلى السلة ✅</div>

<!-- Drawer السلة -->
<aside class="drawer" id="drawer">
  <header>
    <strong>سلة الطلب</strong>
    <button id="closeCart" class="btn btn-outline" style="padding:6px 10px">إغلاق</button>
  </header>
  <div class="body">
    <div id="cartList"></div>

    <div class="total">
      <span>الإجمالي</span>
      <span id="cartTotal">0.00 JD</span>
    </div>

    <div class="form">
      <label>الاسم</label>
      <input class="input" id="cName" placeholder="الاسم الكامل">
      <label>رقم الهاتف</label>
      <input class="input" id="cPhone" placeholder="07XXXXXXXX">
      <label>طريقة الدفع</label>
      <select id="cPay" class="input">
        <option value="كاش عند الاستلام">كاش عند الاستلام</option>
        <option value="بطاقة عند الاستلام">بطاقة عند الاستلام</option>
      </select>
      <label>العنوان التفصيلي</label>
      <textarea class="input" id="cAddr" rows="2" placeholder="اسم الحي / الشارع / علامة مميزة"></textarea>

      <div class="actions">
        <button class="btn-outline btn" id="locateBtn">📍 حدّد موقعي تلقائيًا</button>
        <div class="help" id="locHelp">يمكنك أيضًا إدخال العنوان يدويًا.</div>
        <button class="btn" id="waBtn">إتمام الطلب عبر واتساب</button>
      </div>
    </div>
  </div>
</aside>

<!-- Footer (غامق) -->
<footer>
  <div class="inner">
    <div class="dev">مطوّر من قبل محمد الشلول <a href="https://wa.me/962790986908" target="_blank" rel="noopener">تواصل واتساب</a></div>
    <div class="rights">© <b>الشلول للمأكولات الشعبية</b> — جميع الحقوق محفوظة</div>
  </div>
</footer>

<script>
/* ====== السلة (Frontend) ====== */
const $ = s => document.querySelector(s);
const $$ = s => document.querySelectorAll(s);

const CART_KEY = 'shlul_cart_v1';
let cart = JSON.parse(localStorage.getItem(CART_KEY)||'[]');

function saveCart(){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); }
function cartCount(){ return cart.reduce((a,i)=>a+i.qty,0); }
function cartTotal(){ return cart.reduce((a,i)=>a+i.qty*i.price,0); }
function fmt(n){ return n.toFixed(2)+' JD'; }

function updateFab(){
  $('#cartCount').textContent = cartCount();
  $('#cartTotal') && ($('#cartTotal').textContent = fmt(cartTotal()));
}

function toast(msg='تمت الإضافة إلى السلة ✅'){
  const t = $('#toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'), 1400);
}

function bumpCart(){
  const btn = $('#openCart');
  btn.classList.remove('bump','glow');
  void btn.offsetWidth; // restart animation
  btn.classList.add('bump','glow');
}

function addToCart(item){
  const exist = cart.find(x=>x.id===item.id);
  if(exist){ exist.qty+=1; }
  else{ cart.push({...item, qty:1}); }
  saveCart(); renderCart(); updateFab();
  bumpCart(); toast();
}

function removeFromCart(id){
  cart = cart.filter(x=>x.id!==id);
  saveCart(); renderCart(); updateFab();
}

function changeQty(id,delta){
  const it = cart.find(x=>x.id===id);
  if(!it) return;
  it.qty += delta;
  if(it.qty<=0) return removeFromCart(id);
  saveCart(); renderCart(); updateFab();
}

function renderCart(){
  const list = $('#cartList');
  if(cart.length===0){ list.innerHTML='<div class="help">السلة فارغة.</div>'; updateFab(); return; }
  list.innerHTML = cart.map(it=>`
    <div class="cart-item">
      <img src="${it.img}" alt="">
      <div>
        <h5>${it.name}</h5>
        <div class="help">${(it.price).toFixed(2)} JD للواحد</div>
      </div>
      <div class="qty">
        <button onclick="changeQty('${it.id}',-1)">−</button>
        <strong>${it.qty}</strong>
        <button onclick="changeQty('${it.id}',1)">+</button>
        <button onclick="removeFromCart('${it.id}')" title="حذف" style="margin-inline-start:6px">🗑️</button>
      </div>
    </div>
  `).join('');
  $('#cartTotal').textContent = fmt(cartTotal());
}

// ربط الأزرار
$$('.card, .item').forEach(el=>{
  const data = {
    id: el.dataset.id,
    name: el.dataset.name,
    price: parseFloat(el.dataset.price),
    img: el.dataset.img
  };
  el.querySelector('.add-btn')?.addEventListener('click', ()=>addToCart(data));
  el.querySelector('.mini-add')?.addEventListener('click', ()=>addToCart(data));
});

// فتح/إغلاق الدروير
const drawer = $('#drawer');
$('#openCart').addEventListener('click', ()=>{ drawer.classList.add('open'); renderCart(); });
$('#closeCart').addEventListener('click', ()=> drawer.classList.remove('open'));

// تحديد الموقع
let geo = null;
$('#locateBtn').addEventListener('click', ()=>{
  if(!navigator.geolocation){ $('#locHelp').textContent='المتصفح لا يدعم تحديد الموقع.'; return; }
  $('#locHelp').textContent='جاري تحديد الموقع...';
  navigator.geolocation.getCurrentPosition(pos=>{
    geo = {lat:pos.coords.latitude, lng:pos.coords.longitude};
    $('#locHelp').innerHTML = `تم تحديد الموقع ✔️ <br> <a target="_blank" href="https://maps.google.com/?q=${geo.lat},${geo.lng}">فتح اللوكيشن</a>`;
  },()=>{
    $('#locHelp').textContent='تعذّر تحديد الموقع، حاول مرة أخرى أو اكتب العنوان يدويًا.';
  },{enableHighAccuracy:true, timeout:10000});
});

// إرسال الطلب عبر واتساب
$('#waBtn').addEventListener('click', ()=>{
  if(cart.length===0){ alert('السلة فارغة'); return; }
  const name = $('#cName').value.trim();
  const phone = $('#cPhone').value.trim();
  const pay = $('#cPay').value;
  const addr = $('#cAddr').value.trim();

  const lines = [];
  lines.push('*طلب جديد من الموقع*');
  if(name) lines.push(`الاسم: ${name}`);
  if(phone) lines.push(`الهاتف: ${phone}`);
  lines.push('---');
  cart.forEach(it=> lines.push(`${it.name} × ${it.qty} = ${(it.qty*it.price).toFixed(2)} JD`));
  lines.push('---');
  lines.push(`الإجمالي: ${cartTotal().toFixed(2)} JD`);
  lines.push(`طريقة الدفع: ${pay}`);
  if(geo){ lines.push(`الموقع: https://maps.google.com/?q=${geo.lat},${geo.lng}`); }
  if(addr) lines.push(`العنوان: ${addr}`);

  const msg = encodeURIComponent(lines.join('\n'));
  const wa = '962790986908';  // رقم المطعم
  window.open(`https://wa.me/${wa}?text=${msg}`, '_blank');
});

updateFab();

/* دوال مطلوبة لعناصر onclick */
window.changeQty = changeQty;
window.removeFromCart = removeFromCart;
</script>
</body>
</html>
