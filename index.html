<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ø§Ù„Ø´Ù„ÙˆÙ„ Ù„Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø´Ø¹Ø¨ÙŠØ© | Ø¥Ø±Ø¨Ø¯ â€“ Ø¯ÙˆÙ‚Ø±Ø©</title>
<meta name="description" content="Ø§Ù„Ø´Ù„ÙˆÙ„ Ù„Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø´Ø¹Ø¨ÙŠØ© ÙÙŠ Ø¥Ø±Ø¨Ø¯ â€“ Ø¯ÙˆÙ‚Ø±Ø©. ÙÙ„Ø§ÙÙ„ØŒ Ø­Ù…ØµØŒ ÙÙˆÙ„ØŒ Ù…Ø³Ø¨Ø­Ø© ÙˆØ³Ù†Ø¯ÙˆÙŠØ´Ø§Øª.">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#ffffff; --ink:#0f172a; --muted:#64748b; --line:#e2e8f0;
  --card:#ffffff; --panel:#f8fafc;
  --blue:#2563eb; --blue-2:#22a7ff;
  --green:#10b981;
  --dark:#0b1220;        /* ØºØ§Ù…Ù‚ Ù„Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„ÙÙˆØªØ± */
  --dark-ink:#e5e7eb;    /* Ù†Øµ ÙØ§ØªØ­ Ø¹Ù„Ù‰ Ø§Ù„ØºØ§Ù…Ù‚ */
  --radius:16px; --shadow:0 12px 28px rgba(2,6,23,.06);
  --max:1100px;
}
*{box-sizing:border-box}
body{margin:0;font-family:"Cairo",system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--ink)}
a{color:inherit;text-decoration:none}
.wrap{max-width:var(--max);margin:auto;padding:0 18px}

/* Topbar (ØºØ§Ù…Ù‚) */
.topbar{background:var(--dark);color:var(--dark-ink);border-bottom:1px solid #111827}
.topbar .row{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:18px 0}
.brand h1{margin:0;font-size:clamp(24px,5vw,34px);line-height:1.1}
.brand p{margin:6px 0 0;color:#b6c0cf;font-size:14px}
.meta{display:flex;gap:14px;align-items:center;flex-wrap:wrap;font-weight:700}
.meta a.location{padding:8px 12px;border:1px dashed #2a3b5f;border-radius:12px;color:#bcd7ff;background:#0f1a33}

/* sections & panels */
.section{padding:16px 0}
.panel{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow)}
h2.sec{margin:6px 0 14px;font-size:22px}

/* grid + cards */
.grid{display:grid;gap:14px}
@media (min-width:860px){ .grid-2{grid-template-columns:1fr 1fr} .grid-3{grid-template-columns:repeat(3,1fr)} }
.card{background:#fff;border:1px solid var(--line);border-radius:14px;overflow:hidden;transition:transform .15s ease, box-shadow .2s ease;position:relative}
.card:hover{transform:translateY(-4px);box-shadow:var(--shadow)}
.card img{width:100%;aspect-ratio:3/2;object-fit:cover}
.card .body{padding:14px}
.card h3{margin:0 0 6px;font-size:18px}
.card p{margin:0;color:var(--muted);font-size:13px}
.price{margin-top:8px;font-weight:800;color:var(--blue)}
.add-btn{
  position:absolute;inset:auto 10px 10px auto;padding:10px 12px;border-radius:12px;
  background:linear-gradient(135deg,var(--green),#22c55e);color:#fff;font-weight:800;border:none;cursor:pointer;
  box-shadow:0 8px 22px rgba(16,185,129,.25)
}

/* list menu */
.menu{display:flex;flex-direction:column;gap:12px}
.item{display:flex;gap:12px;align-items:center;border:1px solid var(--line);border-radius:14px;padding:10px;position:relative}
.item img{width:72px;height:72px;border-radius:12px;object-fit:cover}
.item .i-body{flex:1}
.item .i-body h4{margin:0;font-size:17px}
.item .i-body p{margin:4px 0 0;color:var(--muted);font-size:13px}
.item .mini-add{border:none;background:#0ea5e9;color:#fff;border-radius:10px;padding:8px 10px;font-weight:800;cursor:pointer}

/* Ø²Ø± Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ø¹Ø§Ø¦Ù… */
.cart-fab{
  position:fixed;bottom:18px;left:18px;z-index:40;
  background:linear-gradient(135deg,var(--blue),var(--blue-2));color:#fff;border:none;
  border-radius:999px;padding:12px 16px;font-weight:800;display:flex;align-items:center;gap:8px;
  box-shadow:0 18px 36px rgba(37,99,235,.3);cursor:pointer;transform-origin:center;
}
.cart-count{background:#fff;color:#1e40af;border-radius:999px;padding:2px 8px;font-weight:800}

/* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¥Ø¨Ø±Ø§Ø² Ø§Ù„Ø³Ù„Ø© */
@keyframes bump{0%{transform:scale(1)}30%{transform:scale(1.12)}60%{transform:scale(0.96)}100%{transform:scale(1)}}
.cart-fab.bump{animation:bump .55s ease}
@keyframes glow{0%{box-shadow:0 0 0 0 rgba(37,99,235,.5)}100%{box-shadow:0 0 0 14px rgba(37,99,235,0)}}
.cart-fab.glow{animation:glow .8s ease}

/* Toast */
.toast{
  position:fixed;bottom:92px;left:18px;z-index:45;background:#111827;color:#e5e7eb;
  padding:10px 14px;border-radius:12px;box-shadow:0 10px 24px rgba(0,0,0,.25);opacity:0;transform:translateY(8px);
  transition:.25s;pointer-events:none
}
.toast.show{opacity:1;transform:translateY(0)}

/* Drawer Ø§Ù„Ø³Ù„Ø© */
.drawer{
  position:fixed;inset:0 0 0 auto;width:min(100%,420px);background:#fff;box-shadow:-10px 0 30px rgba(2,6,23,.25);
  transform:translateX(100%);transition:transform .25s ease;z-index:50;display:flex;flex-direction:column
}
.drawer.open{transform:none}
.drawer header{padding:14px 16px;border-bottom:1px solid var(--line);display:flex;justify-content:space-between;align-items:center}
.drawer .body{padding:12px 16px;overflow:auto;flex:1;display:flex;flex-direction:column;gap:12px}
.cart-item{display:grid;grid-template-columns:64px 1fr auto;gap:10px;border:1px solid var(--line);border-radius:12px;padding:8px}
.cart-item img{width:64px;height:64px;border-radius:10px;object-fit:cover}
.cart-item h5{margin:0;font-size:15px}
.qty{display:flex;align-items:center;gap:6px}
.qty button{width:28px;height:28px;border-radius:8px;border:1px solid var(--line);background:#fff;cursor:pointer}
.total{display:flex;justify-content:space-between;align-items:center;border-top:1px dashed var(--line);padding-top:10px;font-weight:800}
.form label{display:block;font-size:13px;color:var(--muted);margin:6px 0 4px}
.input, select, textarea{width:100%;padding:10px;border:1px solid var(--line);border-radius:10px;background:#fff;font-family:inherit}
.actions{display:flex;flex-direction:column;gap:8px;margin-top:10px}
.btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;background:linear-gradient(135deg,var(--blue),var(--blue-2));color:#fff;font-weight:800;border:none;cursor:pointer;justify-content:center}
.btn-outline{background:#fff;color:var(--blue);border:1px solid var(--blue)}
.help{font-size:12px;color:var(--muted)}

/* Ø¨Ø·Ø§Ù‚Ø© ØªÙˆØ§ØµÙ„ (Ø¨Ø¯Ù„ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ÙƒØ¨ÙŠØ±Ø©) */
.contact{display:grid;gap:10px}
.contact .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
.contact .pill{padding:8px 12px;border:1px solid var(--line);border-radius:12px;background:#fff}

/* Footer ØºØ§Ù…Ù‚ */
footer{margin:0; background:var(--dark); color:var(--dark-ink); padding:18px 16px;}
footer .inner{max-width:var(--max);margin:auto;display:flex;flex-direction:column;gap:8px;align-items:center;text-align:center}
footer .dev{display:flex;gap:8px;align-items:center}
footer .dev a{background:#25D366;color:#0b3520;padding:8px 12px;border-radius:10px;font-weight:800}
footer .rights{color:#b6c0cf}
</style>
</head>
<body>

<!-- Topbar (ØºØ§Ù…Ù‚) -->
<div class="topbar">
  <div class="wrap">
    <div class="row">
      <div class="brand">
        <h1>Ø§Ù„Ø´Ù„ÙˆÙ„ Ù„Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø´Ø¹Ø¨ÙŠØ©</h1>
        <p>ÙÙ„Ø§ÙÙ„ â€¢ Ø­Ù…Øµ â€¢ ÙÙˆÙ„ â€¢ Ù…Ø³Ø¨Ø­Ø©</p>
      </div>
      <div class="meta">
        <a class="location" href="https://maps.app.goo.gl/d32S4R4zHrgpjp6k6?g_st=aw" target="_blank" rel="noopener">ğŸ“ Ø¥Ø±Ø¨Ø¯ â€“ Ø¯ÙˆÙ‚Ø±Ø©</a>
      </div>
    </div>
  </div>
</div>

<div class="wrap">

  <!-- Ù‚Ø³Ù… Ø±Ø¦ÙŠØ³ÙŠ Ù…Ø®ØªØµØ± -->
  <section class="section panel">
    <h2 class="sec">Ù†ÙƒÙ‡Ø§Øª Ø´Ø¹Ø¨ÙŠØ©â€¦ Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©</h2>
    <p style="margin:0;color:var(--muted)">Ø³Ø§Ù†Ø¯ÙˆÙŠØ´Ø§Øª ÙÙ„Ø§ÙÙ„ØŒ Ø£Ø·Ø¨Ø§Ù‚ Ø­Ù…Øµ ÙˆÙÙˆÙ„ ÙˆÙ…Ø³Ø¨Ø­Ø© â€” ÙˆØ¬Ø¨Ø§Øª Ø¹Ø§Ø¦Ù„ÙŠØ© ÙˆØ®ÙŠØ§Ø±Ø§Øª Ø³Ø±ÙŠØ¹Ø©.</p>
  </section>

  <!-- Ø§Ù„Ø¹Ø±ÙˆØ¶ + Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§ -->
  <section class="section grid grid-2">
    <!-- Ø¹Ø±ÙˆØ¶ Ø§Ù„ÙŠÙˆÙ… -->
    <div class="panel">
      <h2 class="sec">Ø¹Ø±ÙˆØ¶ Ø§Ù„ÙŠÙˆÙ…</h2>
      <div class="grid grid-3">
        <div class="card" data-id="sand1" data-name="Ø³Ù†Ø¯ÙˆÙŠØ´ ÙÙ„Ø§ÙÙ„ Ø·Ø§Ø²Ø¬" data-price="0.60" data-img="Sandwich%201.jpg">
          <img src="Sandwich%201.jpg" alt="Ø³Ù†Ø¯ÙˆÙŠØ´ ÙÙ„Ø§ÙÙ„">
          <button class="add-btn">Ø£Ø¶ÙÙ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
          <div class="body">
            <h3>Ø³Ù†Ø¯ÙˆÙŠØ´ ÙÙ„Ø§ÙÙ„ Ø·Ø§Ø²Ø¬</h3>
            <p>Ø®Ø¨Ø² Ø·Ø§Ø¨ÙˆÙ† + Ù…Ø®Ù„Ù„Ø§Øª + Ø·Ø­ÙŠÙ†ÙŠØ©</p>
            <div class="price">0.60 JD</div>
          </div>
        </div>
        <div class="card" data-id="hummus1" data-name="Ø­Ù…Ù‘Øµ Ø¨Ø§Ù„ØµÙ†ÙˆØ¨Ø±" data-price="1.50" data-img="hommos.jpg">
            <img src="hommos.jpg" alt="Ø­Ù…Øµ">
            <button class="add-btn">Ø£Ø¶ÙÙ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
            <div class="body">
              <h3>Ø­Ù…Ù‘Øµ Ø¨Ø§Ù„ØµÙ†ÙˆØ¨Ø±</h3>
              <p>ÙƒØ±ÙŠÙ…ÙŠ Ø¨Ø²ÙŠØª Ø§Ù„Ø²ÙŠØªÙˆÙ† ÙˆØ§Ù„Ù„ÙŠÙ…ÙˆÙ†</p>
              <div class="price">1.50 JD</div>
            </div>
        </div>
        <div class="card" data-id="foul1" data-name="ÙÙˆÙ„ Ø¨Ù„Ø¯ÙŠ" data-price="1.20" data-img="Foul.jpg">
          <img src="Foul.jpg" alt="ÙÙˆÙ„">
          <button class="add-btn">Ø£Ø¶ÙÙ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
          <div class="body">
            <h3>ÙÙˆÙ„ Ø¨Ù„Ø¯ÙŠ</h3>
            <p>Ø«ÙˆÙ…ØŒ Ù„ÙŠÙ…ÙˆÙ† ÙˆÙƒÙ…ÙˆÙ†</p>
            <div class="price">1.20 JD</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§ -->
    <div class="panel">
      <h2 class="sec">Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§</h2>
      <div class="menu">
        <div class="item" data-id="falafel-plate" data-name="ØµØ­Ù† ÙÙ„Ø§ÙÙ„" data-price="1.80" data-img="Falafel.jpg">
          <img src="Falafel.jpg" alt="ÙÙ„Ø§ÙÙ„">
          <div class="i-body">
            <h4>ØµØ­Ù† ÙÙ„Ø§ÙÙ„</h4>
            <p>12 Ø­Ø¨Ø© + Ø®Ø¶Ø§Ø± ÙˆÙ…Ø®Ù„Ù„Ø§Øª</p>
          </div>
          <div class="price">1.80 JD</div>
          <button class="mini-add">+</button>
        </div>
        <div class="item" data-id="mtsabaha" data-name="Ù…Ø³Ø¨Ù‘Ø­Ø©" data-price="1.30" data-img="Mtapl.jpg">
          <img src="Mtapl.jpg" alt="Ù…Ø³Ø¨Ø­Ø©">
          <div class="i-body">
            <h4>Ù…Ø³Ø¨Ù‘Ø­Ø©</h4>
            <p>Ø­Ù…Øµ Ø­Ø¨ + Ø·Ø­ÙŠÙ†ÙŠØ© + Ø¯Ø¨Ø³ Ø±Ù…Ø§Ù†</p>
          </div>
          <div class="price">1.30 JD</div>
          <button class="mini-add">+</button>
        </div>
        <div class="item" data-id="family-sand" data-name="Ø³Ù†Ø¯ÙˆÙŠØ´ ÙÙ„Ø§ÙÙ„ Ø¹Ø§Ø¦Ù„ÙŠ" data-price="2.20" data-img="Sandwich%203.jpg">
          <img src="Sandwich%203.jpg" alt="Ø³Ù†Ø¯ÙˆÙŠØ´ ÙÙ„Ø§ÙÙ„">
          <div class="i-body">
            <h4>Ø³Ù†Ø¯ÙˆÙŠØ´ ÙÙ„Ø§ÙÙ„ Ø¹Ø§Ø¦Ù„ÙŠ</h4>
            <p>Ø®Ø¨Ø² ÙØ±Ù†Ø³ÙŠ Ù…Ø­Ù…Ù‘Øµ</p>
          </div>
          <div class="price">2.20 JD</div>
          <button class="mini-add">+</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ + Ø²Ø± Ø®Ø±ÙŠØ·Ø© ØµØºÙŠØ± -->
  <section class="section panel contact">
    <h2 class="sec">ğŸ“ ØªÙˆØ§ØµÙ„ ÙˆÙ…ÙˆÙ‚Ø¹Ù†Ø§</h2>
    <div class="row">
      <a class="btn" href="https://maps.app.goo.gl/d32S4R4zHrgpjp6k6?g_st=aw" target="_blank" rel="noopener">ğŸ—ºï¸ Ø§ÙØªØ­ Ø§Ù„Ù„ÙˆÙƒÙŠØ´Ù†</a>
      <a class="pill" href="tel:0790986908">Ø§Ù„Ù‡Ø§ØªÙ: 0790986908</a>
      <a class="pill" href="mailto:mshlool684@gmail.com">email: mshlool684@gmail.com</a>
      <span class="pill">Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„: 8 ØµØ¨Ø§Ø­Ù‹Ø§ â€” 12 Ù„ÙŠÙ„Ù‹Ø§</span>
    </div>
  </section>

</div>

<!-- Ø²Ø± Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ø¹Ø§Ø¦Ù… -->
<button class="cart-fab" id="openCart" aria-label="Ø§Ù„Ø³Ù„Ø©">
  ğŸ›’ Ø§Ù„Ø³Ù„Ø© <span class="cart-count" id="cartCount">0</span>
</button>
<div class="toast" id="toast">ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© âœ…</div>

<!-- Drawer Ø§Ù„Ø³Ù„Ø© -->
<aside class="drawer" id="drawer">
  <header>
    <strong>Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</strong>
    <button id="closeCart" class="btn btn-outline" style="padding:6px 10px">Ø¥ØºÙ„Ø§Ù‚</button>
  </header>
  <div class="body">
    <div id="cartList"></div>

    <div class="total">
      <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
      <span id="cartTotal">0.00 JD</span>
    </div>

    <div class="form">
      <label>Ø§Ù„Ø§Ø³Ù…</label>
      <input class="input" id="cName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
      <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
      <input class="input" id="cPhone" placeholder="07XXXXXXXX">
      <label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>
      <select id="cPay" class="input">
        <option value="ÙƒØ§Ø´ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…">ÙƒØ§Ø´ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</option>
        <option value="Ø¨Ø·Ø§Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…">Ø¨Ø·Ø§Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</option>
      </select>
      <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ</label>
      <textarea class="input" id="cAddr" rows="2" placeholder="Ø§Ø³Ù… Ø§Ù„Ø­ÙŠ / Ø§Ù„Ø´Ø§Ø±Ø¹ / Ø¹Ù„Ø§Ù…Ø© Ù…Ù…ÙŠØ²Ø©"></textarea>

      <div class="actions">
        <button class="btn-outline btn" id="locateBtn">ğŸ“ Ø­Ø¯Ù‘Ø¯ Ù…ÙˆÙ‚Ø¹ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§</button>
        <div class="help" id="locHelp">ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ù‹Ø§ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙŠØ¯ÙˆÙŠÙ‹Ø§.</div>
        <button class="btn" id="waBtn">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
      </div>
    </div>
  </div>
</aside>

<!-- Footer (ØºØ§Ù…Ù‚) -->
<footer>
  <div class="inner">
    <div class="dev">Ù…Ø·ÙˆÙ‘Ø± Ù…Ù† Ù‚Ø¨Ù„ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø´Ù„ÙˆÙ„ <a href="https://wa.me/962790986908" target="_blank" rel="noopener">ØªÙˆØ§ØµÙ„ ÙˆØ§ØªØ³Ø§Ø¨</a></div>
    <div class="rights">Â© <b>Ø§Ù„Ø´Ù„ÙˆÙ„ Ù„Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø´Ø¹Ø¨ÙŠØ©</b> â€” Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</div>
  </div>
</footer>

<script>
/* ====== Ø§Ù„Ø³Ù„Ø© (Frontend) ====== */
const $ = s => document.querySelector(s);
const $$ = s => document.querySelectorAll(s);

const CART_KEY = 'shlul_cart_v1';
let cart = JSON.parse(localStorage.getItem(CART_KEY)||'[]');

function saveCart(){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); }
function cartCount(){ return cart.reduce((a,i)=>a+i.qty,0); }
function cartTotal(){ return cart.reduce((a,i)=>a+i.qty*i.price,0); }
function fmt(n){ return n.toFixed(2)+' JD'; }

function updateFab(){
  $('#cartCount').textContent = cartCount();
  $('#cartTotal') && ($('#cartTotal').textContent = fmt(cartTotal()));
}

function toast(msg='ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© âœ…'){
  const t = $('#toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'), 1400);
}

function bumpCart(){
  const btn = $('#openCart');
  btn.classList.remove('bump','glow');
  void btn.offsetWidth; // restart animation
  btn.classList.add('bump','glow');
}

function addToCart(item){
  const exist = cart.find(x=>x.id===item.id);
  if(exist){ exist.qty+=1; }
  else{ cart.push({...item, qty:1}); }
  saveCart(); renderCart(); updateFab();
  bumpCart(); toast();
}

function removeFromCart(id){
  cart = cart.filter(x=>x.id!==id);
  saveCart(); renderCart(); updateFab();
}

function changeQty(id,delta){
  const it = cart.find(x=>x.id===id);
  if(!it) return;
  it.qty += delta;
  if(it.qty<=0) return removeFromCart(id);
  saveCart(); renderCart(); updateFab();
}

function renderCart(){
  const list = $('#cartList');
  if(cart.length===0){ list.innerHTML='<div class="help">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©.</div>'; updateFab(); return; }
  list.innerHTML = cart.map(it=>`
    <div class="cart-item">
      <img src="${it.img}" alt="">
      <div>
        <h5>${it.name}</h5>
        <div class="help">${(it.price).toFixed(2)} JD Ù„Ù„ÙˆØ§Ø­Ø¯</div>
      </div>
      <div class="qty">
        <button onclick="changeQty('${it.id}',-1)">âˆ’</button>
        <strong>${it.qty}</strong>
        <button onclick="changeQty('${it.id}',1)">+</button>
        <button onclick="removeFromCart('${it.id}')" title="Ø­Ø°Ù" style="margin-inline-start:6px">ğŸ—‘ï¸</button>
      </div>
    </div>
  `).join('');
  $('#cartTotal').textContent = fmt(cartTotal());
}

// Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø±
$$('.card, .item').forEach(el=>{
  const data = {
    id: el.dataset.id,
    name: el.dataset.name,
    price: parseFloat(el.dataset.price),
    img: el.dataset.img
  };
  el.querySelector('.add-btn')?.addEventListener('click', ()=>addToCart(data));
  el.querySelector('.mini-add')?.addEventListener('click', ()=>addToCart(data));
});

// ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¯Ø±ÙˆÙŠØ±
const drawer = $('#drawer');
$('#openCart').addEventListener('click', ()=>{ drawer.classList.add('open'); renderCart(); });
$('#closeCart').addEventListener('click', ()=> drawer.classList.remove('open'));

// ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹
let geo = null;
$('#locateBtn').addEventListener('click', ()=>{
  if(!navigator.geolocation){ $('#locHelp').textContent='Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.'; return; }
  $('#locHelp').textContent='Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...';
  navigator.geolocation.getCurrentPosition(pos=>{
    geo = {lat:pos.coords.latitude, lng:pos.coords.longitude};
    $('#locHelp').innerHTML = `ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ âœ”ï¸ <br> <a target="_blank" href="https://maps.google.com/?q=${geo.lat},${geo.lng}">ÙØªØ­ Ø§Ù„Ù„ÙˆÙƒÙŠØ´Ù†</a>`;
  },()=>{
    $('#locHelp').textContent='ØªØ¹Ø°Ù‘Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§ÙƒØªØ¨ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙŠØ¯ÙˆÙŠÙ‹Ø§.';
  },{enableHighAccuracy:true, timeout:10000});
});

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
$('#waBtn').addEventListener('click', ()=>{
  if(cart.length===0){ alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©'); return; }
  const name = $('#cName').value.trim();
  const phone = $('#cPhone').value.trim();
  const pay = $('#cPay').value;
  const addr = $('#cAddr').value.trim();

  const lines = [];
  lines.push('*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹*');
  if(name) lines.push(`Ø§Ù„Ø§Ø³Ù…: ${name}`);
  if(phone) lines.push(`Ø§Ù„Ù‡Ø§ØªÙ: ${phone}`);
  lines.push('---');
  cart.forEach(it=> lines.push(`${it.name} Ã— ${it.qty} = ${(it.qty*it.price).toFixed(2)} JD`));
  lines.push('---');
  lines.push(`Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${cartTotal().toFixed(2)} JD`);
  lines.push(`Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: ${pay}`);
  if(geo){ lines.push(`Ø§Ù„Ù…ÙˆÙ‚Ø¹: https://maps.google.com/?q=${geo.lat},${geo.lng}`); }
  if(addr) lines.push(`Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${addr}`);

  const msg = encodeURIComponent(lines.join('\n'));
  const wa = '962790986908';  // Ø±Ù‚Ù… Ø§Ù„Ù…Ø·Ø¹Ù…
  window.open(`https://wa.me/${wa}?text=${msg}`, '_blank');
});

updateFab();

/* Ø¯ÙˆØ§Ù„ Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ø¹Ù†Ø§ØµØ± onclick */
window.changeQty = changeQty;
window.removeFromCart = removeFromCart;
</script>
</body>
</html>
